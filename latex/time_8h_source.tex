\doxysection{time.\+h}
\hypertarget{time_8h_source}{}\label{time_8h_source}\index{Node2/time/time.h@{Node2/time/time.h}}
\mbox{\hyperlink{time_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ <stdint.h>}}
\DoxyCodeLine{00004\ }
\DoxyCodeLine{00005\ }
\DoxyCodeLine{00006\ }
\DoxyCodeLine{00007\ \textcolor{comment}{//\ Time\ is\ a\ count\ of\ the\ number\ of\ ticks,\ and\ is\ represented\ as\ a\ uint64\_t}}
\DoxyCodeLine{00008\ \textcolor{comment}{//\ Time\ is\ used\ to\ mean\ both\ absolute\ time\ since\ device\ start,\ and\ a\ duration}}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ \textcolor{comment}{//\ Return\ the\ time\ since\ the\ device\ was\ started.}}
\DoxyCodeLine{00011\ uint64\_t\ \mbox{\hyperlink{time_8h_a22e2c9fb8d43dacb991ed09186338320}{time\_now}}(\textcolor{keywordtype}{void});}
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00013\ \textcolor{comment}{//\ Convert\ standard\ wall\ time\ units\ to\ ticks}}
\DoxyCodeLine{00014\ uint64\_t\ \mbox{\hyperlink{time_8h_af09a0713831389e1498c379eac5f312f}{usecs}}(uint64\_t\ s);}
\DoxyCodeLine{00015\ uint64\_t\ \mbox{\hyperlink{time_8h_adeb6e83d0b8835f5cd60bfc03f5e5074}{msecs}}(uint64\_t\ s);}
\DoxyCodeLine{00016\ uint64\_t\ \mbox{\hyperlink{time_8h_aee3c36104b02a19cfed301b6011e589b}{seconds}}(uint64\_t\ s);}
\DoxyCodeLine{00017\ uint64\_t\ \mbox{\hyperlink{time_8h_a71721e1ea1ecb855bb01f2e17e47b0f0}{minutes}}(uint64\_t\ s);}
\DoxyCodeLine{00018\ uint64\_t\ \mbox{\hyperlink{time_8h_a54c15945d9eac856fd8a70c7cc67db65}{hours}}(uint64\_t\ s);}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \textcolor{comment}{//\ Convert\ ticks\ to\ wall\ time\ units}}
\DoxyCodeLine{00021\ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{time_8h_ad01d142df934576ec4959ab2b046576c}{totalUsecs}}(uint64\_t\ t);}
\DoxyCodeLine{00022\ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{time_8h_a36d2584e2df9b7a4bb07dbcf3bd230a0}{totalMsecs}}(uint64\_t\ t);}
\DoxyCodeLine{00023\ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{time_8h_a1ea4d43d2446ce5ad6929df690422fb7}{totalSeconds}}(uint64\_t\ t);}
\DoxyCodeLine{00024\ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{time_8h_a863d505e9a69908d87b008d3234e7130}{totalMinutes}}(uint64\_t\ t);}
\DoxyCodeLine{00025\ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{time_8h_a40959e304328d23fd2222719daedecdb}{totalHours}}(uint64\_t\ t);}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \textcolor{comment}{//\ Spins\ the\ CPU\ (delays)\ for\ a\ duration}}
\DoxyCodeLine{00028\ \textcolor{comment}{//\ Example:}}
\DoxyCodeLine{00029\ \textcolor{comment}{//\ \ \ time\_spinFor(mescs(200));}}
\DoxyCodeLine{00030\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{time_8h_aeb702e2f0f90467bbe2525db80d3b96e}{time\_spinFor}}(uint64\_t\ duration);}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \textcolor{comment}{//\ Spins\ the\ CPU\ (delays)\ until\ some\ time\ after\ device\ start}}
\DoxyCodeLine{00033\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{time_8h_a4bc1f6857d0925ac5f37d2ac548ff06f}{time\_spinUntil}}(uint64\_t\ then);}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00035\ \textcolor{comment}{//\ Performs\ a\ body\ periodically}}
\DoxyCodeLine{00036\ \textcolor{comment}{//\ Example:}}
\DoxyCodeLine{00037\ \textcolor{comment}{//\ \ \ time\_doPeriodic(msecs(50))\{}}
\DoxyCodeLine{00038\ \textcolor{comment}{//\ \ \ \ \ \ \ //\ do\ stuff}}
\DoxyCodeLine{00039\ \textcolor{comment}{//\ \ \ \}}}
\DoxyCodeLine{00040\ \textcolor{preprocessor}{\#define\ time\_doPeriodic(period)\ \(\backslash\)}}
\DoxyCodeLine{00041\ \textcolor{preprocessor}{for(uint64\_t\ then\ =\ time\_now()\ +\ (period);\ 1;\ then\ +=\ (period),\ time\_spinUntil(then))}}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00043\ \textcolor{comment}{//\ Human-\/readable\ time}}
\DoxyCodeLine{00044\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structTime}{Time}}\ \mbox{\hyperlink{structTime}{Time}};}
\DoxyCodeLine{00045\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structTime}{Time}}\ \{}
\DoxyCodeLine{00046\ \ \ \ \ uint16\_t\ \mbox{\hyperlink{structTime_ae1ed244a8cbcb09ad7c457fe3e015bf4}{ticks}};}
\DoxyCodeLine{00047\ \ \ \ \ uint16\_t\ \mbox{\hyperlink{structTime_afc612bbc0d1607f5c0e731001940736a}{msecs}};}
\DoxyCodeLine{00048\ \ \ \ \ uint8\_t\ \ \mbox{\hyperlink{structTime_a50f368643f5c887a739f63fe75c1ef9d}{seconds}};}
\DoxyCodeLine{00049\ \ \ \ \ uint8\_t\ \ \mbox{\hyperlink{structTime_a4fd76057f48dcab74d69133de5536148}{minutes}};}
\DoxyCodeLine{00050\ \ \ \ \ uint16\_t\ \mbox{\hyperlink{structTime_a7ad5bf75899556ebc63c3275b858c083}{hours}};}
\DoxyCodeLine{00051\ \};}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ \textcolor{comment}{//\ Split\ ticks\ into\ human-\/readable\ form}}
\DoxyCodeLine{00054\ \mbox{\hyperlink{structTime}{Time}}\ \mbox{\hyperlink{time_8h_a7bebf0fce1908a64cc55d19431a592e2}{time\_split}}(uint64\_t\ t);}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \textcolor{comment}{//\ Convert\ human-\/readable\ time\ into\ ticks}}
\DoxyCodeLine{00057\ uint64\_t\ \mbox{\hyperlink{time_8h_a9de57442d9848deb2f7414234ca62f76}{time\_combine}}(\mbox{\hyperlink{structTime}{Time}}\ t);}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \textcolor{comment}{//\ Convenience\ macros\ for\ printing\ human-\/readable\ \`{}Time`s.}}
\DoxyCodeLine{00060\ \textcolor{comment}{//\ Example:}}
\DoxyCodeLine{00061\ \textcolor{comment}{//\ \ \ \ \ \ Time\ t\ =\ (Time)\{.hours\ =\ 1,\ .minutes\ =\ 5,\ .seconds\ =\ 48,\ .msecs\ =\ 2\};}}
\DoxyCodeLine{00062\ \textcolor{comment}{//\ \ \ \ \ \ printf("{}t:\ "{}\ time\_fmtStr\ "{}\(\backslash\)n"{},\ time\_fmtParam(t));}}
\DoxyCodeLine{00063\ \textcolor{comment}{//\ \ \ \ \ \ //\ prints\ "{}t:\ Time(1h,\ 5m,\ 48s,\ 2ms,\ 0t)"{}}}
\DoxyCodeLine{00064\ \textcolor{preprocessor}{\#define\ time\_fmtStr\ "{}Time(\%uh,\ \%um,\ \%us,\ \%ums,\ \%ut)"{}}}
\DoxyCodeLine{00065\ \textcolor{preprocessor}{\#define\ time\_fmtParam(t)\ t.hours,\ t.minutes,\ t.seconds,\ t.msecs,\ t.ticks}}

\end{DoxyCode}
