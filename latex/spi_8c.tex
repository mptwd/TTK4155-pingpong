\doxysection{pingpong/\+SPI/spi.c File Reference}
\hypertarget{spi_8c}{}\label{spi_8c}\index{pingpong/SPI/spi.c@{pingpong/SPI/spi.c}}
{\ttfamily \#include "{}spi.\+h"{}}\newline
{\ttfamily \#include $<$avr/io.\+h$>$}\newline
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{spi_8c_ae909944aa85ae98323073c628be541aa}{spi\+\_\+init}} (void)
\item 
void \mbox{\hyperlink{spi_8c_ab727b35cde460159bfa3f05dbad8d7fc}{spi\+\_\+select\+\_\+slave}} (\mbox{\hyperlink{SPI_8h_ad4c0f7862ed1ff8df0e3421adb602a3c}{slave}} s)
\item 
void \mbox{\hyperlink{spi_8c_a6c051eb2e4d533296906a31b927d00b0}{spi\+\_\+write\+\_\+byte}} (uint8\+\_\+t byte)
\item 
uint8\+\_\+t \mbox{\hyperlink{spi_8c_ac9e3606e9e7cbeaec69037e3bf48500c}{spi\+\_\+read\+\_\+byte}} (void)
\item 
void \mbox{\hyperlink{spi_8c_a175344eba780ecfe31d540e972ffad1a}{spi\+\_\+read\+\_\+write\+\_\+bytes}} (uint8\+\_\+t \texorpdfstring{$\ast$}{*}byte, size\+\_\+t size)
\end{DoxyCompactItemize}


\label{doc-func-members}
\Hypertarget{spi_8c_doc-func-members}
\doxysubsection{Function Documentation}
\Hypertarget{spi_8c_ae909944aa85ae98323073c628be541aa}\index{spi.c@{spi.c}!spi\_init@{spi\_init}}
\index{spi\_init@{spi\_init}!spi.c@{spi.c}}
\doxysubsubsection{\texorpdfstring{spi\_init()}{spi\_init()}}
{\footnotesize\ttfamily \label{spi_8c_ae909944aa85ae98323073c628be541aa} 
void spi\+\_\+init (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}

Should be called if screen is to be used. \Hypertarget{spi_8c_ac9e3606e9e7cbeaec69037e3bf48500c}\index{spi.c@{spi.c}!spi\_read\_byte@{spi\_read\_byte}}
\index{spi\_read\_byte@{spi\_read\_byte}!spi.c@{spi.c}}
\doxysubsubsection{\texorpdfstring{spi\_read\_byte()}{spi\_read\_byte()}}
{\footnotesize\ttfamily \label{spi_8c_ac9e3606e9e7cbeaec69037e3bf48500c} 
uint8\+\_\+t spi\+\_\+read\+\_\+byte (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}

Read a byte from a slave. A slave should be selected beforehand using spi\+\_\+select\+\_\+slave.

The SPI protocol is full-\/duplex, a read is done at the same time as a write.

This function can timeout. If no input is received, then it returns 0

@require Called after a call to spi\+\_\+write\+\_\+byte \begin{DoxyReturn}{Returns}
the read byte, or 0 in case of timeout. 
\end{DoxyReturn}
\Hypertarget{spi_8c_a175344eba780ecfe31d540e972ffad1a}\index{spi.c@{spi.c}!spi\_read\_write\_bytes@{spi\_read\_write\_bytes}}
\index{spi\_read\_write\_bytes@{spi\_read\_write\_bytes}!spi.c@{spi.c}}
\doxysubsubsection{\texorpdfstring{spi\_read\_write\_bytes()}{spi\_read\_write\_bytes()}}
{\footnotesize\ttfamily \label{spi_8c_a175344eba780ecfe31d540e972ffad1a} 
void spi\+\_\+read\+\_\+write\+\_\+bytes (\begin{DoxyParamCaption}\item[{uint8\+\_\+t \texorpdfstring{$\ast$}{*}}]{byte}{, }\item[{size\+\_\+t}]{size}{}\end{DoxyParamCaption})}

Write multiple bytes, and read each response from a slave. A slave should be selected beforehand using spi\+\_\+select\+\_\+slave.


\begin{DoxyParams}{Parameters}
{\em byte} & the bytes to send. The read bytes are also placed in this array, in the order of them being received. \\
\hline
{\em size} & The number of bytes in byte. \\
\hline
\end{DoxyParams}
\Hypertarget{spi_8c_ab727b35cde460159bfa3f05dbad8d7fc}\index{spi.c@{spi.c}!spi\_select\_slave@{spi\_select\_slave}}
\index{spi\_select\_slave@{spi\_select\_slave}!spi.c@{spi.c}}
\doxysubsubsection{\texorpdfstring{spi\_select\_slave()}{spi\_select\_slave()}}
{\footnotesize\ttfamily \label{spi_8c_ab727b35cde460159bfa3f05dbad8d7fc} 
void spi\+\_\+select\+\_\+slave (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{SPI_8h_ad4c0f7862ed1ff8df0e3421adb602a3c}{slave}}}]{s}{}\end{DoxyParamCaption})}

Select a slave. Only one slave can be selected at once. This is enforce by that function.


\begin{DoxyParams}{Parameters}
{\em s} & The slave to select. \\
\hline
\end{DoxyParams}
\Hypertarget{spi_8c_a6c051eb2e4d533296906a31b927d00b0}\index{spi.c@{spi.c}!spi\_write\_byte@{spi\_write\_byte}}
\index{spi\_write\_byte@{spi\_write\_byte}!spi.c@{spi.c}}
\doxysubsubsection{\texorpdfstring{spi\_write\_byte()}{spi\_write\_byte()}}
{\footnotesize\ttfamily \label{spi_8c_a6c051eb2e4d533296906a31b927d00b0} 
void spi\+\_\+write\+\_\+byte (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{byte}{}\end{DoxyParamCaption})}

Send a byte to a slave. A slave should be selected beforehand using spi\+\_\+select\+\_\+slave.


\begin{DoxyParams}{Parameters}
{\em byte} & the data to send. \\
\hline
\end{DoxyParams}
